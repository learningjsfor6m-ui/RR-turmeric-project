<div class="container py-4">
  <!-- <h2 class="mb-4" [class]="isLoading ? 'colorRed':'colorBlack'">{{headingOfPage}}</h2> -->
  <!-- <div class="row">
    <div class="col-md-4">
      <div class="input-group">
        <onpush-demo></onpush-demo>
      </div>
    </div>
  </div> -->

  <!-- Open Modal Button -->




  <filter-header [compName]="headingOfPage" (changeEvent)="selectedItem" (changeInput)="getText($event)" [godown]="editGodownData"
    (changeLayoutFlag)="getLayoutFlag($event)" (sortChange)="onSort($event)" [sortOpt]="sortOptions" [addNewGodown]="addNewGodown"></filter-header>

  <div class="container">


  </div>
  <!-- isLoading spinner -->
  <div *ngIf="isLoading" class="text-center my-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">isLoading...</span>
    </div>
  </div>
  <!-- {{searchText}} -->
  <!-- Godown cards -->
  <section *ngIf="!isLoading">

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
      @if(isLayout == 'card'){
      <div class="col" *ngFor="let godown of godownDetails | filter:searchText :selectedItem">
        <div class="card h-100 shadow-sm small-card">
          <button class="btn btn-sm btn-light position-absolute top-0 end-0 m-2" (click)="editGodown(godown)">
            <i class="bi bi-pencil-fill"></i>
          </button>
          <div class="card-body">
            <h5 class="card-title">{{ godown.name }}</h5>
            <div class="d-flex flex-wrap">
              <span class="badge bg-primary me-2 mb-1">Location: <span class="fw-normal">{{ godown.location
                  }}</span></span>
              <span class="badge bg-secondary me-2 mb-1">Capacity: <span class="fw-normal">{{ godown.capacity | number
                  }}
                  KG</span></span>
              <span class="badge bg-success me-2 mb-1">Current: <span class="fw-normal">{{ godown.currentStock | number
                  }}
                  KG</span></span>
              <span class="badge bg-info text-dark me-2 mb-1">Inward: <span class="fw-normal">{{ godown.inwardStock |
                  number }} KG</span></span>
              <span class="badge bg-warning text-dark me-2 mb-1">Outward: <span class="fw-normal">{{ godown.outwardStock
                  |
                  number }} KG</span></span>
              <span class="badge bg-light text-dark me-2 mb-1">Updated: <span class="fw-normal">{{ godown.lastUpdated |
                  date:'short' }}</span></span>
              <span class="badge" [ngClass]="godown.status === 'active' ? 'bg-success' : 'bg-secondary'">
                Status: <span class="fw-normal">{{ godown.status | titlecase }}</span>
              </span>
              <span class="badge bg-dark text-white me-2 mb-1">
                Contact: <span class="fw-normal">{{ godown.contactPerson ? godown.contactPerson:'NA' }}</span>
              </span>
              <span class="badge bg-dark text-white me-2 mb-1">
                Phone: <span class="fw-normal">{{ godown.contactNumber ? godown.contactNumber:'NA' }}</span>
              </span>
            </div>
            <!-- Action buttons -->
            <div class="d-flex justify-content-between mt-3">
              <button class="btn btn-sm btn-primary" (click)="gotoGodownPage(godown)">View</button>
              <!-- <button class="btn btn-sm btn-secondary">Edit</button> -->
            </div>
          </div>
        </div>
      </div>
      }@else {
      <table class="table table-bordered table-hover align-middle">

        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Godown Name</th>
            <th>Location</th>
            <th>Capacity (KG)</th>
            <th>Current Stock (KG)</th>
            <th>Inward (KG)</th>
            <th>Outward (KG)</th>
            <th>Status</th>
            <th>Contact Person</th>
            <th>Phone</th>
            <th>Last Updated</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let godown of godownDetails | filter:searchText:selectedItem; let i = index">

            <td>{{ i + 1 }}</td>

            <td class="fw-semibold">
              {{ godown.name }}
            </td>

            <td>
              <span class="badge bg-primary">
                {{ godown.location }}
              </span>
            </td>

            <td>
              {{ godown.capacity | number }}
            </td>

            <td>
              <span class="badge bg-success">
                {{ godown.currentStock | number }}
              </span>
            </td>

            <td>
              <span class="badge bg-info text-dark">
                {{ godown.inwardStock | number }}
              </span>
            </td>

            <td>
              <span class="badge bg-warning text-dark">
                {{ godown.outwardStock | number }}
              </span>
            </td>

            <td>
              <span class="badge" [ngClass]="godown.status === 'active' ? 'bg-success' : 'bg-secondary'">
                {{ godown.status | titlecase }}
              </span>
            </td>

            <td>
              {{ godown.contactPerson || 'NA' }}
            </td>

            <td>
              {{ godown.contactNumber || 'NA' }}
            </td>

            <td>
              {{ godown.lastUpdated | date:'short' }}
            </td>

            <td>
              <button class="btn btn-sm btn-outline-primary" (click)="gotoGodownPage(godown)">
                View
              </button>
            </td>

          </tr>

          <!-- No data -->
          <tr *ngIf="!godownDetails.length">
            <td colspan="12" class="text-center text-muted">
              No godown records found
            </td>
          </tr>

        </tbody>
      </table>
      }

    </div>
  </section>

</div>
